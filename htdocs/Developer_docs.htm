<html><!-- #BeginTemplate "/Templates/dtvnormal.dwt" -->
<head>
<!-- #BeginEditable "doctitle" --> 
<title>dTV -- Developer Docs</title>
<!-- #EndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
p {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
.bottommenu {  font-family: Arial, Helvetica, sans-serif; font-size: 8pt; font-style: normal; text-decoration: none}
h3 {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt; font-style: normal; font-weight: bold}
h1 {  font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 18pt; font-weight: bold}
li {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
h2 {  font-family: Arial, Helvetica, sans-serif; font-size: 14pt; font-weight: bold}
ol {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
blockquote {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
pre {  font-family: "Courier New", Courier, mono; font-size: 9pt}
ul {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
-->
</style>
</head>

<body bgcolor="#FFFFFF">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td height="1" width="160"><img src="images/spacer.gif" width="1" height="1"></td>
    <td height="1" width="342"><img src="images/spacer.gif" width="1" height="1"></td>
    <td height="1" width="501"><img src="images/spacer.gif" width="1" height="1"></td>
  </tr>
  <tr> 
    <td width="160"><img src="images/dtvlogotvthumb.jpg" width="160" height="140" alt="dTV Logo"></td>
    <td colspan="2" align="right" valign="bottom">
      <font face="Verdana, Arial, Helvetica, sans-serif" size="5"><b><!-- #BeginEditable "Page%20Title" -->Developer 
      Documentation &nbsp;<!-- #EndEditable --></b></font></td>
  </tr>
  <tr bgcolor="#FFCC00" align="right"> 
    <td colspan="3"><img src="images/yellowspacer.gif" width="100%" height="2"></td>
  </tr>
  <tr> 
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3"><!-- #BeginEditable "Text" --> 
      <p>First of all welcome to dTV development!&nbsp; If you have any interest 
        in video and TV I'm sure you will find working on dTV rewarding.&nbsp; 
        There is a pretty steep learning curve but what you learn will be useful 
        in every area of your home theater hobby.</p>
      <h2><br>
        Prerequisites</h2>
      <p>You must be a proficient C programmer with some knowledge of windows 
        programming.&nbsp; dTV is probably not a good project to cut your teeth 
        on as any crashes&nbsp;while developing causes your computer to hang.&nbsp; 
        Be careful and back up your machine regularly.</p>
      <p>You must have access to a version of Microsoft Visual C++ and the latest 
        source.</p>
      <h2><br>
        Background Reading</h2>
      <p>The software talks directly to the bt8x8 chip on whatever PCI card you 
        have installed.&nbsp; It would be very sensible to read the data sheet 
        for this card to get an idea of how the chip works and hopefully be able 
        to work out some of the code.&nbsp; Request the datasheet from <a href="http://ebiz4.conexant.com/default.sph/SaServletEngine.class/Web/products/products.jsp?Type=Prod&ProdFamId=10&ProdCatId=0&ProdSubCatId=397&PartId=227">Conexant</a>
      here.</p>
      <p>The code for the linux drivers that forms the basis for Multidec can 
        be found <a href="http://me.in-berlin.de/~kraxel/bttv.html">here</a>.&nbsp; 
        This is a much later version than the one used by MultiDec so it is more 
        than possible that bugs have been fixed. The functions starting BT848_ 
        in the code should map to a similarly named function in the file bttv_driver.c.</p>
      <p>This <a href="http://www.video-demystified.com/mm/tutor/ch08.pdf">chapter 
        from Video Demystified</a> describes in detail both VideoText and closed 
        captions as well as full details of NTSC, PAL and SECAM.&nbsp; Without 
        this the VBI code will be imposiible to understand.</p>
      <p>This <a href="ftp://telepresence.dmem.strath.ac.uk/pub/bt848/spec/">FTP 
        site</a> contains documents on the MSP sound chips and Phillips and Temic 
        tuners that would be useful for anyone looking to improve these areas.&nbsp; 
        I only recently found this site and have had a quick look and found that 
        most of the information you need should be buried in this lot.&nbsp;</p>
      <h2><br>
      Important Files</h2>
      <p>Audio.c - Deals with the sound.&nbsp; The function Audio_SetSource selects 
        the sound channel output by the card.&nbsp; For cards with an MSP chip 
        there are several other functions to deals with the features of those 
        chips. None of this code has been tested by me.</p>
      <p>bt848.c - Deals with low level and chip specific details, don't even 
        bother looking in here if you haven't got the datasheet.</p>
      <p>VBI_CCdecode.c - Very early Closed Caption decoder, read the description 
        of CC in the Video Demystified first and then see if you can work out 
        what the code is trying to do.&nbsp; The code is untested and there have 
        been no reported successes with it.</p>
      <p>Deinterlace.c - Contains an array containing information about all the
      deinterlacing routines used by dTV.</p>
      <p>DI_XXXX.c - Contains the code for the XXXX deinterlacing method</p>
      <p><b>dTV.c</b> - Contains the Main windows event handler and WinMain.&nbsp; 
        This file is the best place to start to get a feel for how the software 
        functions at a high level.</p>
      <p>FD_50Hz.c - Contains the PAL/SECAM film detection code.</p>
      <p>FD_60Hz.c - Contains the NTSC film detection code.</p>
      <p>Other.c - Contains just 
        the overlay handling code and DirectDraw initialization.</p>
      <p><b>OutThread.c</b> - This is where the main logic of the display code 
        is.&nbsp; All the auto detection and flipping is handled in here.&nbsp; 
        This would be the file I expect to change the most and would be a good 
        second file to take a look at.&nbsp; The main functions is YUVOutThread.</p>
      <p>ProgramList.c - Handles the Program List dialog box.&nbsp; This could 
        definitely do with improvement.</p>
      <p>Tuner.c - Handles the tuner and also the country settings.</p>
      <p>TVCards.c - Contains the details of all the cards that should be supported 
        by dTV.&nbsp; The data is taken from the bttv driver so check that they 
        haven't changed their values.&nbsp; The structures are similar but not 
        exactly the same so check that the values are being transposed properly.</p>
      <p>vbi.c - High level VBI decoding. VBI_DecodeLine is the high level function.</p>
      <p>VBI_VideoText.c - VideoText decoder</p>
      <h2>
        Comments</h2>
      <p>Sound chip support needs a lot of further investigation.&nbsp; The code 
        in bttv is probably a good place to start.&nbsp; Note that bttv supports 
        many different sound chips, These could be added in a similar way to the 
        MSP chip but you're on your own.</p>
      <p>Tuner support also need a lot of work.&nbsp; There is no support currently 
        for fine tuning or manual channel setup.</p>
      <p>Last Changed - John Adcock 16th January 2001</p>
      <!-- #EndEditable --></td>
  </tr>
  <tr> 
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr bgcolor="#FFCC00"> 
    <td colspan="3"> 
      <div align="center"><img src="images/yellowspacer.gif" width="100%" height="2"></div>
    </td>
  </tr>
  <tr> 
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr> 
    <td colspan="3"> 
      <div align="center"><a class="bottommenu" href="index.php">home</a> | <a href="about.htm" class="bottommenu">about</a>
        | <a href="Reviews.htm" class="bottommenu">reviews</a> |&nbsp;<a href="screenshots/index.htm" class="bottommenu">screenshots</a>
        | <a href="downloads.htm" class="bottommenu">download</a> | <a href="Authors.htm" class="bottommenu">authors</a>
        | <a href="Thanks.htm" class="bottommenu">thanks</a> <br>
        <a href="setup/index.htm" class="bottommenu">setup</a> | <a href="keyboard.htm" class="bottommenu">keyboard
        shortcuts </a>| <a href="http://sourceforge.net/mail/?group_id=7420" class="bottommenu">mailing
        list</a> | <a href="FAQ.htm" class="bottommenu">faq</a> | <a href="developers.htm" class="bottommenu">developers</a>
        | <a href="Links.htm" class="bottommenu">links</a></div>
    </td>
  </tr>
</table>
<p><a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=7420&type=1" width="88" height="31" border="0"
alt="SourceForge.net" align="right"></a></p>
<p>&nbsp; </p>
</body>
<!-- #EndTemplate --></html>
